# 安装 Ubuntu 的一次经历

***2021.11.22***

最近突然迫切想在 Linux 下开发（也不算很突然，以前就想过用 Linux 当开发环境，只是卸载又重装回 Windows 了），其中有诸多原因，其中主要的原因如下：

1. Windows 下开发环境的配置较为复杂，且 bug 容易出现，不兼容的驱动导致电脑频繁蓝屏
2. 先前安装 vmware 虚拟机时，电脑蓝屏且掉了键盘，触摸板等设备驱动，最后用非常规方法解决，折腾了小一会儿
3. Windows 系统文件不易管理，得时时刻刻关注系统盘大小等文件管理问题
4. Linux 下开发环境的配置较简单，全然只需命令行配置，少量需要手动添加环境变量
5. Linux 系统较为稳定，不容易崩溃
6. Linux 不用过多考虑文件管理，全盘安装即可

## 初期

一开始考虑到本人所在团队仍有微信小程序开发的需求，而微信小程序开发工具仅支持 Win 和 Mac 平台，所以一开始计划安装双系统，先前电脑现存系统为 Win10，且一开始计划安装的系统为 Manjaro（发行第一的 Linux 系统），然而无论是分盘安装还是同盘安装（因为电脑有两个磁盘），都无法进入 Manjaro 系统，安装 Ubuntu 也是如此，搜索了一番后，不了了事。

这时，其实已经有打算放弃的念头了，打算装 Win11 了事，起初主要原因之一也就是系统不稳定，想着重装一个纯净的系统稳定一点，不过事情出现了转机，由于团队发展需要，以后开发和维护小程序的时间不多了，计划把开发重心转移到移动 APP 上，在这种情况下，我就不用担心必须要使用其他平台独占的软件了（微信小程序社区竟然说没有打算支持 Linux，不过现在没有使用它的需求了，不重要了），这下可以备份好一些文档等数据，格盘安装。

## 安装

一开始，我是想入 arch 邪教，毕竟 Manjaro 才是 Linux 第一发行版！但是安装试用了一段时间后，发现不太习惯他的一些包的命令（对 Ubuntu 包的命令了解一点），尽管人人都说它好，可最后我还是安装了 Ubuntu（可能以后会转向 arch 吧）。

安装没什么可说的，考虑到新版本可能对硬件支持较好，并且我喜欢追新，这里我安装的是最新版，而不是长期支持版。考虑到我磁盘空间较大，且打算全盘安装，并未按照一些博客上的分区方法进行安装，而是选择全盘安装，接下来进行一些选项设置，等待安装即可。我这里选择了安装时连接网络，这里要注意一点，系统可能识别不到电脑上的无线网卡，或者安装时并未携带驱动（这是我安装时的比较坑的一点，接下来会讲到），所以我接入了以太网进行安装.

## 坑来了

1. 这里选择最小安装（只需安装必要的软件，其他大部分是用不上的，需要的时候再安装即可）和安装必要的驱动，尽管选择了后者选项，系统会在接入网络环境下自动安装大部分驱动，但某些驱动大概率是装不上或者是在官方的源里是没有的，如无线网卡驱动等，这时就需要自行安装。

   ### 解决方法

   打开终端，输入 ``` lspci -nnk | grep -iA2 net``` 命令找到 Network controller 这一项，查看 Device 后对应的型号，如我的是 [10ec:8852]，在搜索引擎上对这个型号进行搜索，建议在外网进行搜索，国内搜索很可能搜不到，找到相关信息后可以对应到另一个具体型号，如我的是 8852AE，这时前往 Github，对这个型号进行搜索，直接搜即可，无需加描述，一般会有一个以上的项目存放该设备驱动相关的文件，选择 star 最多的一个即可，将其克隆至本地，按照项目中的描述文件进行操作即可，如果没有描述，可以在克隆后的文件夹内打开终端参照如下操作：

   ``` bash
   sudo apt-get update
   sudo apt-get install make gcc linux-headers-$(uname -r) build-essential git
   make
   sudo make install
   ```

   使用和禁用驱动如下：

   ```
   sudo modprobe -r xxx驱动名称         #This unloads the module
   sudo modprobe xxx驱动名称          #This loads the module
   ```

2. 另一个坑，根据搜索总结，大概率出现，笔记本用户合盖无法休眠，休眠后无法唤醒

   ### 解决方法

   #### 合盖无法休眠：

   经过大量搜索与尝试，这个要看厂商对 Linux 系统的适配或者说支持程度，如果厂商一直紧密参与自家产品对 Linux 的适配，那这个问题大概率是不会出现的，如 Lenovo（联想）对 RedHat（红帽，Linux 的另一个发行版）一直在适配和支持，对 Ubuntu 也如此，所以使用有认证的产品的话，不用太过于担心这个，如果是其他没有厂商去做适配的产品或者是不确定有没有去做适配的产品，这个得自己安装尝试，看运气，经过我大量搜索和尝试，如果硬件支持不好，无论如何修改系统配置文件，都不会生效。所以对于合盖无法自动休眠的用户，需要手动点击休眠或者设置快捷键。

   #### 休眠无法唤醒：

   这个主要出现在使用笔记本的用户群体中，休眠后无法唤醒系统。

   这里贴一个链接，言简意赅，我就是通过该文章解决的，这里不进行过多赘述了。

   [解决Linux系统笔记本合盖黑屏与休眠的问题](https://www.jianshu.com/p/f4f1ba2e92cf)

## 美化

系统安装和解决一些系统问题后，我按照教程进行了一系列美化（原生的主题和界面还是有些平淡和普通的，作为一个前端爱好者，对美要有追求）

这里同样贴出一个链接，按照该文章的思路一步步进行美化，最终达到和作者一样的效果，这里不进行赘述，该文章的效果我已经复现了，除了资源下载稍慢，基本无坑，

[Ubuntu 20.04 桌面美化](https://zhuanlan.zhihu.com/p/176977192)

虽然说是 Ubuntu 的美化，但是对其他使用的 Gnome 桌面的 Linux 发行版一样适用

这里需要注意一点，我在 Ubuntu 20.04 下复现了作者的美化效果，在升级版本之后，在 21.10下，dock 栏效果有变化，无法达到先前的效果，不过只是微量变化，其他部分的美化并无变化，对此不介意的人尽管按照教程进行美化即可。

## 配置开发环境

最后是配置开发环境，这里需要注意一点，对于网络速度慢或者访问外网慢的同学，可以先将软件源改为国内的一些镜像服务器，这个步骤网络上有很多教程，搜索即可。

在 Linux 上配置开发环境不要太简单，通过 ``` sudo apt-get install xxx[软件名称]```命令即可完成大部分的软件安装，一些官方或者镜像服务器上没有的软件需要自行下载至本地再进行安装：

1. 下载软件的 .deb 格式的包，在父目录下通过 ``` sudo dpkg -i xxx.deb```命令即可安装

2. 下载软件的 .tar.gz 等格式的包，解压之后即算安装，这种方式有点类似于 Windows 下的绿色安装包。如要使用命令行打开或者要使命令行识别软件名称，可以更改系统配置文件，添加环境变量，这点 Linux 比 Windows 方便多了，通过 apt 安装的软件无需配置环境变量，且大部分软件配置环境变量都特别简单，下面简单介绍一下：

   如需配置环境变量，使用 gedit（一个文本编辑器）编辑 bashrc 即可，具体命令如下：

   ``` sudo gedit ~/.bashrc ```

   在 bashrc 中尾部添加：

   ``` export PATH=[这里填可执行文件的父目录路径]:$PATH```

   最后保存退出，

   运行 ``` source ~/.bashrc ```重新加载配置文件

   之后即可通过命令行调用对应程序

### 主要配置的开发环境如下：

#### vscode :

轻量编辑器，看文档和写小 Demo 必备

安装同步设置，插件即可

#### Pycharm

Python集成编辑器，写中等和大型项目时使用

通过镜像站下载，本地安装 Anaconda 后，创建虚拟环境

设置和插件一样能同步，前提是登陆了 Jetbrains 账号（学生可以申请教育使用，免费使用专业版软件）	

#### Clion

c/c++ 集成编辑器

命令行安装 gcc/g++，在设置中配置项目编译器时会自动检测

#### Webstorm

web集成编辑器

如要运行web项目，至少需要安装一个浏览器，即使该编辑器内置了一个用于预览的工具（功能没有浏览器强大）

如果需要单独运行 Javascirpt 脚本，则需要安装一个 Runtime（运行时）：Nodejs

Nodejs 的安装方法可以参考官网文档

#### Android Studio

App 开发的集成编辑器

团队技术选型为 Dart 语言和 Flutter 框架，环境配置参考中文网文档：

#### Git

最后是版本管理工具，通过命令行安装即可，注意不要忘了在 Github 账号中添加 SSH KEY：

```  bash
git config --global user.name "github名字"
git config --global user.email "github邮箱"
ssh-keygen -t rsa -C "github邮箱"
```

 创建 ssh key 之后，进入到存放 key 的文件夹，复制公匙中的内容，粘贴到 Github 添加 ssh key 的设置中，至此完成。

## 感想

到最后一步，配好一台适用于日常开发的电脑，还是花了不少时间和经历的，包括一些坑，都是真实地去踩了，这也是我写此文的原因，完整的记录一次折腾的过程，遇到的坑和解决方法。我也是初学者，也许初学者真实经历的坑对另一些初学者来说更有意义，因为正是他们可能遇到的，希望能帮助想要尝试 Linux 却存在困惑或胆怯的同学们。 

使用一段时间后，感觉 Linux 和 Windows 的体验真的不一样，不管是配置开发环境还是日常使用，在有替代软件或者熟悉命令的情况下，对于我来说:

### 优点：

1. Linux 的运行效率和系统稳定性都完胜 Windows,
2. 在一些部分节省了不少时间，如安装软件，配置环境
3. 有大量开源软件
4. GUI 系统下，用户操作和 Windows 并未差别很大

### 缺点：

1. 存在部分常用软件仍没有 Linux 版本（点明批评腾讯，微信 和 QQ 到现在还没有一个稳定的 Linux 版本，仍需通过 Wine 的方式来使用，被迫使用 飞书...）
2. 需要记忆命令
3. 驱动支持比不上 Windows，部分驱动需要自行花时间寻找和编译源码进行安装，门槛较高

以上就是暂时得出的一些结论，等待更深入的了解和使用，也许改变我的观点。

***第一次写如此长文，如有笔误，请见谅，希望能帮助到读者！***







