# 深入解析CSS

## 层叠、优先级和继承

### 层叠

Def：层叠指的是一系列解决冲突的规则。它决定了如何解决冲突，是CSS语言的基础。

层叠会依据三种条件解决方案：

1. 样式表的来源
2. 选择器优先级
3. 源码顺序

<hr></hr>

#### 样式表来源

样式表有三种来源：

1. 作者样式表（级别最高）
2. 用户代理样式（级别最低）--浏览器默认样式
3. 用户样式表（级别介于两者之间）

注意：如果作者样式表中未全覆盖用户代理样式表时，未覆盖的规则仍会正常生效

！important声明：标记了！important的声明会被当做更高优先级的来源

总体优先级排序：

1. 作者！important
2. 作者
3. 用户代理

<hr></hr>

#### 理解优先级

1. 内联样式！important > 外部样式！important

2. 选择器优先级：

   1. 如果ID数量更多，则优先级更高
   2. 如果ID数量一致，则拥有最多类的选择器胜出
   3. 如果以上两次比较都一致，那么拥有最多标签名的选择器胜出

   注意：伪类选择器（如：hover）和属性选择器（如 [ type = "input" ]）与一个类选择器的优先级相同。通用选择器（*）和组合器（>、+、~）对优先级没有影响

   很多时候开发人员使用ID选择器，却不知道它会创建更高的优先级，之后就很难覆盖它。如果要覆盖一个ID选择器的样式，就必须要用另一个ID选择器。

3. 优先级标记

   一个常用的表示优先级的方式时用数值形式来标记，通常用都好隔开每个数。比如，”1，2，2“ 表示选择器由一个ID、两个类、两个标签组成。优先级最高的ID列为第一位，紧接着是类，最后是标签。

   有时也用4个数的标记如：1，0，0，0 第一位值的范围为0或1，代表这个声明是由行内样式添加的。

4. 关于优先级的思考

   最好让优先级尽可能第，这样当需要覆盖一些样式时，才能有选择空间

#### 源码顺序

如果两个声明的来源和优先级相同，其中一个声明在样式表中出现较晚，或者位于页面较晚引入的样式表中，则该声明胜出。

注意：面对一个样式问题时，分两个步骤来解决它：

1. 确定哪些声明可以实现效果
2. 思考可以用哪些选择器结构

##### 链接样式和源码顺序

注意这个问题的原因是优先级相同时，后出现的样式会覆盖先出现的样式。

下列代码展示了如何以正确的顺序来书写链接样式：

``` css
a:link {
  color: blue;
  text-decoration: none;
}

a:visited {
  color: purple;
}

a:hover {
  text-decoration: underline;
}

a:active {
  color: red;
}
```

这个顺序的记忆口诀是 ”LoVe/HAte“ （”爱/狠"），即 link（链接）、visited（访问）、hover（悬停）、active（激活）。

##### 层叠值

层叠值-作为层叠结果，应用到一个元素上的特定属性的值。

#### 两条经验法则

1. 在选择器中不要使用ID
2. 不要使用！important

如果有例外，不必固守他们

### 继承

